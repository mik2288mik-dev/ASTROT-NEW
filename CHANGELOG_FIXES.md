# üéâ –û—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö

## –î–∞—Ç–∞: 18 –¥–µ–∫–∞–±—Ä—è 2025

–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ.

---

## ‚úÖ –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ - –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. ‚úÖ OWNER_ID –≤—ã–Ω–µ—Å–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
**–ë—ã–ª–æ:** Hardcoded ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ App.tsx  
**–°—Ç–∞–ª–æ:** 
- –î–æ–±–∞–≤–ª–µ–Ω `NEXT_PUBLIC_OWNER_ID` –≤ `.env.example`
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `process.env.NEXT_PUBLIC_OWNER_ID`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –µ—Å–ª–∏ ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–§–∞–π–ª—ã:**
- `.env.example` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
- `App.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Rate Limiting
**–ë—ã–ª–æ:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π API  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `lib/rateLimit.ts` —Å in-memory rate limiting
- –†–∞–∑–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è free/premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
  - Free: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É (–æ–±—â–∏–µ), 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É (AI)
  - Premium: 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É (–æ–±—â–∏–µ), 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É (AI)
- –ü—Ä–∏–º–µ–Ω—ë–Ω –∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–º endpoints:
  - `/api/astrology/natal-chart`
  - `/api/astrology/three-keys`
  - `/api/astrology/natal-intro`
  - `/api/astrology/chat`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 429 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ `X-RateLimit-*` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–§–∞–π–ª—ã:**
- `lib/rateLimit.ts` - –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å
- `pages/api/astrology/*.ts` - –ø—Ä–∏–º–µ–Ω—ë–Ω middleware

---

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–ë—ã–ª–æ:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `011_add_performance_indexes`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã:
  - `idx_users_is_premium` - –ø–æ–∏—Å–∫ –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `idx_users_created_at` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
  - `idx_charts_updated_at` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç
  - `idx_users_generated_content_timestamps` - JSONB –∏–Ω–¥–µ–∫—Å –¥–ª—è timestamps
  - `idx_synastry_cache_updated` - –∫—ç—à —Å–∏–Ω–∞—Å—Ç—Ä–∏–π
  - `idx_regenerations_date` - —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ó–∞–ø—É—â–µ–Ω `ANALYZE` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–∞–±–ª–∏—Ü

**–§–∞–π–ª—ã:**
- `lib/migrations.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ migration011

---

### 4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω Error Tracking
**–ë—ã–ª–æ:** –û—à–∏–±–∫–∏ —Ç–µ—Ä—è—é—Ç—Å—è, –Ω–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `lib/errorTracking.ts`
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 –æ—à–∏–±–æ–∫
- –§—É–Ω–∫—Ü–∏—è `logError()` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- Middleware `withErrorTracking()` –¥–ª—è API routes
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—à–∏–±–æ–∫
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Sentry

**–§–∞–π–ª—ã:**
- `lib/errorTracking.ts` - –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å
- `views/AdminPanel.tsx` - –≤–∫–ª–∞–¥–∫–∞ —Å –æ—à–∏–±–∫–∞–º–∏

---

## ‚úÖ –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ - –ò–°–ü–†–ê–í–õ–ï–ù–û

### 5. ‚úÖ Deep Dive –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
**–ë—ã–ª–æ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSONB —Å–æ–∑–¥–∞–≤–∞–ª–æ –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `012_create_deep_dive_analyses_table`
- –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `deep_dive_analyses` —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- –ú–µ—Ç–æ–¥—ã –≤ `db.ts`:
  - `deepDiveAnalyses.get(userId, topic)`
  - `deepDiveAnalyses.set(userId, topic, analysis)`
  - `deepDiveAnalyses.getAll(userId)`
- –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ foreign key

**–§–∞–π–ª—ã:**
- `lib/migrations.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ migration012
- `lib/db.ts` - –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã

---

### 6. ‚úÖ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã –ø—Ä–æ–º–ø—Ç—ã - —É–±—Ä–∞–Ω –∞–∫—Ü–µ–Ω—Ç –Ω–∞ "—Ç—Ä–∏ –∫–ª—é—á–∞"
**–ë—ã–ª–æ:** –ê–∫—Ü–µ–Ω—Ç –Ω–∞ "—Ç—Ä–∏ –∫–ª—é—á–∞" –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç `createFullNatalChartIntroPrompt()` - –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏:
  - `createPersonalityAnalysisPrompt()` - –õ–∏—á–Ω–æ—Å—Ç—å –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä
  - `createLoveAnalysisPrompt()` - –õ—é–±–æ–≤—å –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
  - `createCareerAnalysisPrompt()` - –ö–∞—Ä—å–µ—Ä–∞ –∏ —Å–∞–º–æ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
  - `createChallengesAnalysisPrompt()` - –ó–æ–Ω—ã —Ä–æ—Å—Ç–∞ (–¥–µ–ª–∏–∫–∞—Ç–Ω–æ!)
  - `createKarmaAnalysisPrompt()` - –ö–∞—Ä–º–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞
- –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–º —Å—Ç–∏–ª–µ —Å —é–º–æ—Ä–æ–º
- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω `createDeepDivePrompt()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `lib/prompts.ts` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
- `pages/api/astrology/natal-intro.ts` - –Ω–æ–≤—ã–π endpoint
- `services/astrologyService.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `getNatalIntro()`

---

### 7. ‚úÖ –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω –ø—Ä–µ–º–∏—É–º –∏ –Ω–µ-–ø—Ä–µ–º–∏—É–º –∫–æ–Ω—Ç–µ–Ω—Ç
**–ë—ã–ª–æ:** –ù–µ—á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π  
**–°—Ç–∞–ª–æ:**
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `lib/premiumConfig.ts` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ñ–ª–∞–≥–∞–º–∏ `free`/`premium` –∏ –ª–∏–º–∏—Ç–∞–º–∏
- –§—É–Ω–∫—Ü–∏—è `hasFeatureAccess()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
- –§—É–Ω–∫—Ü–∏—è `getUsageStats()` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –¢–µ–∫—Å—Ç—ã –¥–ª—è Paywall –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- FREE —Ñ—É–Ω–∫—Ü–∏–∏:
  - –†–∞—Å—á–µ—Ç –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
  - –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (–æ–±—â–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç)
  - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø
  - 3 –∫—Ä–∞—Ç–∫–∏–µ —Å–∏–Ω–∞—Å—Ç—Ä–∏–∏
  - 10 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Oracle —á–∞—Ç/–¥–µ–Ω—å
  - 3 —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏/–Ω–µ–¥–µ–ª—é
- PREMIUM —Ñ—É–Ω–∫—Ü–∏–∏:
  - –í—Å–µ 5 —Å–µ–∫—Ü–∏–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
  - –ù–µ–¥–µ–ª—å–Ω—ã–µ –∏ –º–µ—Å—è—á–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã
  - –ü–æ–ª–Ω–∞—è —Å–∏–Ω–∞—Å—Ç—Ä–∏—è
  - Hook Chat (–≥–ª—É–±–æ–∫–∏–π)
  - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - Transit forecast
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `lib/premiumConfig.ts` - –Ω–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `views/NatalChart.tsx` - –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω UI —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º
- `types.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω `UserGeneratedContent` —Å `natalIntro`

---

### 8. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Å –ø–æ–ª–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
**–ë—ã–ª–æ:** –ë–∞–∑–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏  
**–°—Ç–∞–ª–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤–∫–ª–∞–¥–∫–∏: Users, Stats, Errors, Settings
- **Users Tab:**
  - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/ID
  - Toggle Premium/Admin —Å—Ç–∞—Ç—É—Å–æ–≤
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –∑–≤–µ–∑–¥
- **Stats Tab:**
  - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ Premium
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–∞—Ä—Ç
  - Deep Dive –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å –∑–≤–µ–∑–¥
  - Top 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Errors Tab:**
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
  - Timestamp, user ID, endpoint
  - –°—á–µ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –Ω–∞ badge
- **Settings Tab:**
  - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ (OpenAI, DB, Rate Limiting)
  - Premium –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  - System health
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - Total users
  - Premium/Free split
  - Charts created
  - Deep Dives used
  - Conversion rate

**–§–∞–π–ª—ã:**
- `views/AdminPanel.tsx` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞

---

## üìä –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ù–ê–¢–ê–õ–¨–ù–û–ô –ö–ê–†–¢–´

### –î–æ:
```
–¢—Ä–∏ –ö–ª—é—á–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ):
- –≠–Ω–µ—Ä–≥–∏—è
- –õ—é–±–æ–≤—å  
- –ö–∞—Ä—å–µ—Ä–∞

Deep Dive (premium):
- Personality
- Love
- Career
- Weakness
- Karma
```

### –ü–æ—Å–ª–µ:
```
–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ):
- –û–±—â–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏
- –°—É–ø–µ—Ä—Å–∏–ª—ã
- –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–º
- –°—Ç–∏—Ö–∏—è –∏ —ç–Ω–µ—Ä–≥–∏—è
- 600-900 —Å–∏–º–≤–æ–ª–æ–≤

–ü–æ–ª–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ (premium):
üåü –õ–∏—á–Ω–æ—Å—Ç—å –∏ –•–∞—Ä–∞–∫—Ç–µ—Ä
‚ù§Ô∏è –õ—é–±–æ–≤—å –∏ –û—Ç–Ω–æ—à–µ–Ω–∏—è
üéØ –ö–∞—Ä—å–µ—Ä–∞ –∏ –°–∞–º–æ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
üîç –ó–æ–Ω—ã –†–æ—Å—Ç–∞ –∏ –í—ã–∑–æ–≤—ã
‚ú® –ö–∞—Ä–º–∏—á–µ—Å–∫–∞—è –ó–∞–¥–∞—á–∞

–ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è: 900-1200 —Å–∏–º–≤–æ–ª–æ–≤, –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑
```

---

## üóÑÔ∏è –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `deep_dive_analyses` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç JSONB

### –ù–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
- 7 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è JSONB timestamps

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- Migration 011: Performance indexes
- Migration 012: Deep Dive table

---

## üìù –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. `lib/rateLimit.ts` - Rate limiting —Å–∏—Å—Ç–µ–º–∞
2. `lib/errorTracking.ts` - Error tracking
3. `lib/premiumConfig.ts` - Premium/Free –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
4. `pages/api/astrology/natal-intro.ts` - –ù–æ–≤—ã–π API endpoint

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `.env.example` - –¥–æ–±–∞–≤–ª–µ–Ω OWNER_ID
2. `App.tsx` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ OWNER_ID
3. `lib/migrations.ts` - 2 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
4. `lib/db.ts` - –º–µ—Ç–æ–¥—ã –¥–ª—è deep_dive_analyses
5. `lib/prompts.ts` - –Ω–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
6. `types.ts` - –¥–æ–±–∞–≤–ª–µ–Ω natalIntro –≤ UserGeneratedContent
7. `constants.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
8. `views/NatalChart.tsx` - –Ω–æ–≤—ã–π UI —Å –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º
9. `views/AdminPanel.tsx` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å —Ç–∞–±–∞–º–∏
10. `services/astrologyService.ts` - –¥–æ–±–∞–≤–ª–µ–Ω getNatalIntro()
11. `services/contentGenerationService.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è natalIntro
12. –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ API routes - –ø—Ä–∏–º–µ–Ω–µ–Ω rate limiting

---

## üéØ –ß–¢–û –î–ê–õ–¨–®–ï?

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production:

1. **Backup:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup –ë–î –≤ Railway
   - Schedule: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ + –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry –¥–ª—è production error tracking
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å unit —Ç–µ—Å—Ç—ã
   - –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–ª–æ—É

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü—Ä–∏ —Ä–æ—Å—Ç–µ > 1000 –∞–∫—Ç–∏–≤–Ω—ã—Ö —é–∑–µ—Ä–æ–≤:
     - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Redis –¥–ª—è rate limiting
     - –í—ã–Ω–µ—Å—Ç–∏ Deep Dive –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
     - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Mixpanel/Amplitude
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é Free ‚Üí Premium
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Paywall

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞  
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ - –±–∞–∑–æ–≤—ã–π –≤–Ω–µ–¥—Ä–µ–Ω  
‚úÖ Rate Limiting - –∞–∫—Ç–∏–≤–µ–Ω  
‚úÖ Error Tracking - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ Premium —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ - —á–µ—Ç–∫–æ–µ  
‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è  
‚úÖ –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ - –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞  

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é! üéâ**

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –î–õ–Ø –ü–û–î–î–ï–†–ñ–ö–ò

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º:
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –∫–æ–¥–µ
- –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º! ‚ú®**
