# –û–¢–ß–ï–¢ –û –ü–†–û–í–ï–†–ö–ï –†–ê–°–ß–ï–¢–û–í –ò –û–ë–†–ê–ë–û–¢–ö–ò –î–ê–ù–ù–´–•

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-12-02 17:30:26  
**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** –†–∞—Å—á–µ—Ç—ã, –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö, –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∑–∞–≥—Ä—É–∑–∫–∞

---

## –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

### ‚úÖ –û–ë–©–ò–ô –°–¢–ê–¢–£–°: –°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –†–∞—Å—á–µ—Ç—ã –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ Swiss Ephemeris
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö (camelCase ‚Üî snake_case)
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

**–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:**
- ‚ö†Ô∏è 3 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- ‚ö†Ô∏è 1 –ø—Ä–æ–±–ª–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 4 —É–ª—É—á—à–µ–Ω–∏—è
- –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 3 —É–ª—É—á—à–µ–Ω–∏—è
- –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 3 —É–ª—É—á—à–µ–Ω–∏—è

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

---

## 1. –†–ê–°–ß–ï–¢–´ –ù–ê–¢–ê–õ–¨–ù–û–ô –ö–ê–†–¢–´

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 1.1. Swiss Ephemeris Calculator (`lib/swisseph-calculator.ts`)
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è WebAssembly –≤–µ—Ä—Å–∏—è Swiss Ephemeris
- **–ì–µ–æ–∫–æ–¥–∏–Ω–≥:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Nominatim OpenStreetMap –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ UTC —Å —É—á–µ—Ç–æ–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
  - –§–æ—Ä–º—É–ª–∞: `timezoneOffsetHours = lon / 15.0` (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—ã —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—ã —Å—É—Ç–æ–∫
- **–Æ–ª–∏–∞–Ω—Å–∫–∏–π –¥–µ–Ω—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `swe.swe_julday()`
- **–ü–æ–ª–æ–∂–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `swe.swe_calc_ut()` —Å —Ñ–ª–∞–≥–æ–º `258` (SEFLG_SWIEPH | SEFLG_SPEED)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞–∫–æ–≤:** –§—É–Ω–∫—Ü–∏—è `getZodiacSign()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–Ω–∞–∫ –ø–æ —ç–∫–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–ª–≥–æ—Ç–µ
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞–¥—É—Å–æ–≤: `normalizedDegree = degree % 360`
  - –ò–Ω–¥–µ–∫—Å –∑–Ω–∞–∫–∞: `signIndex = Math.floor(normalizedDegree / 30)`
  - –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π 360¬∞
- **–ì—Ä–∞–¥—É—Å –≤ –∑–Ω–∞–∫–µ:** –§—É–Ω–∫—Ü–∏—è `getDegreeInSign()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –≥—Ä–∞–¥—É—Å –≤–Ω—É—Ç—Ä–∏ –∑–Ω–∞–∫–∞ (0-29.99¬∞)
- **–ê—Å—Ü–µ–Ω–¥–µ–Ω—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `swe.swe_houses()` —Å —Å–∏—Å—Ç–µ–º–æ–π Placidus
- **–î–æ–º–∏–Ω–∏—Ä—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–æ–∂–µ–Ω–∏–π –ø–ª–∞–Ω–µ—Ç
- **–£–ø—Ä–∞–≤–ª—è—é—â–∞—è –ø–ª–∞–Ω–µ—Ç–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞–∫–∞ –°–æ–ª–Ω—Ü–∞

#### 1.2. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–∫–∞ –°–æ–ª–Ω—Ü–∞:** –ï—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `getExpectedSunSignByDate()`
  - –ü—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –∑–Ω–∞–∫ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ–∂–∏–¥–∞–µ–º—ã–π
  - –≠—Ç–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–ª–∞–Ω–µ—Ç:** –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ sun, moon, ascendant –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 1.1. –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ `lon / 15.0` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–µ –≤ 1-2 —á–∞—Å–∞ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è:** –ï—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∑–Ω–∞–∫–∞ –°–æ–ª–Ω—Ü–∞ –ø–æ –¥–∞—Ç–µ
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tz-lookup`)

#### 1.2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- **–í–ª–∏—è–Ω–∏–µ:** –†–∞—Å—á–µ—Ç –∫–∞—Ä—Ç—ã –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

## 2. –í–í–û–î –î–ê–ù–ù–´–•

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 2.1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`lib/validation.ts`)
- **–ò–º—è:** 
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É, –¥–ª–∏–Ω—É (2-100 —Å–∏–º–≤–æ–ª–æ–≤)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ (–±—É–∫–≤—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã, –∞–ø–æ—Å—Ç—Ä–æ—Ñ—ã)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ –ª–∞—Ç–∏–Ω–∏—Ü—ã
- **–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:**
  - –§–æ—Ä–º–∞—Ç: YYYY-MM-DD
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–∞—Ç—ã
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±—É–¥—É—â–µ–µ (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (–Ω–µ —Ä–∞–Ω—å—à–µ 1900 –≥–æ–¥–∞)
- **–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è:**
  - –§–æ—Ä–º–∞—Ç: HH:MM (24-—á–∞—Å–æ–≤–æ–π)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ regex: `/^([01]\d|2[0-3]):([0-5]\d)$/`
- **–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è:**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É, –¥–ª–∏–Ω—É (2-200 —Å–∏–º–≤–æ–ª–æ–≤)
- **–Ø–∑—ã–∫:**
  - –¢–æ–ª—å–∫–æ 'ru' –∏–ª–∏ 'en'

#### 2.2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Onboarding (`views/Onboarding.tsx`)
- **–í–≤–æ–¥ –∏–º–µ–Ω–∏:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- **–í–≤–æ–¥ –¥–∞—Ç—ã:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `<input type="date">` —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø–æ–∫–∞–∑–æ–º –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
- **–í–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `<input type="time">` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **–í–≤–æ–¥ –º–µ—Å—Ç–∞:** –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Å placeholder
- **–ì–∞–ª–æ—á–∫–∞ "–ó–∞–ø–æ–º–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ":** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `isSetup`

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 2.1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ Onboarding
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è:** –í–∞–ª–∏–¥–∞—Ü–∏—è –µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ API endpoint
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –ª—É—á—à–µ–≥–æ UX

---

## 3. –í–´–í–û–î –î–ê–ù–ù–´–•

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 3.1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã (`views/NatalChart.tsx`)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `NatalChartData` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–¢—Ä–∏ –∫–ª—é—á–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑ `profile.threeKeys` (—Å fallback –Ω–∞ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
  - ‚ö†Ô∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** `threeKeys` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–∂–µ –≤ `profile.generatedContent.threeKeys`
  - **–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `profile.threeKeys` –Ω–∞–ø—Ä—è–º—É—é
  - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `profile.generatedContent?.threeKeys` –∫–∞–∫ fallback
- **–ü–ª–∞–Ω–µ—Ç—ã:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –ø–ª–∞–Ω–µ—Ç—ã (sun, moon, rising, mercury, venus, mars)
- **–≠–ª–µ–º–µ–Ω—Ç –∏ —É–ø—Ä–∞–≤–∏—Ç–µ–ª—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

#### 3.2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** –í—Å–µ —Ç–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –≤ `types.ts`
- **–Ø–∑—ã–∫:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `profile.language` –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 3.1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ null –∑–Ω–∞—á–µ–Ω–∏–π
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º
- **–ü—Ä–∏–º–µ—Ä:** `chartData.sun.sign` –º–æ–∂–µ—Ç –±—ã—Ç—å undefined –µ—Å–ª–∏ `chartData.sun` null
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å optional chaining (`chartData?.sun?.sign`)

#### 3.2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö threeKeys
- **–ü—Ä–æ–±–ª–µ–º–∞:** `threeKeys` –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –≤ `profile.threeKeys`, —Ç–∞–∫ –∏ –≤ `profile.generatedContent.threeKeys`
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é –¥–∞–Ω–Ω—ã—Ö
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** 
  - –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `generatedContent.threeKeys`
  - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ: –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö
  - –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `profile.threeKeys`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `generatedContent.threeKeys` –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ –º–µ—Å—Ç–∞

---

## 4. –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 4.1. Storage Service (`services/storageService.ts`)
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:** 
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç API endpoint `/api/users/${userId}` (POST)
  - Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏
  - –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç userId –∏–∑ Telegram WebApp
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã:**
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç API endpoint `/api/charts/${userId}` (POST)
  - Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏

#### 4.2. API Endpoints (`pages/api/users/[id].ts`, `pages/api/charts/[id].ts`)
- **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–µ–∂–¥—É camelCase (–∫–ª–∏–µ–Ω—Ç) –∏ snake_case (–ë–î)
  - `birthDate` ‚Üî `birth_date`
  - `birthTime` ‚Üî `birth_time`
  - `birthPlace` ‚Üî `birth_place`
  - `isSetup` ‚Üî `is_setup`
  - `isPremium` ‚Üî `is_premium`
  - `threeKeys` ‚Üî `three_keys`
  - `generatedContent` ‚Üî `generated_content`
- **JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –≤ JSONB –ø–æ–ª—è:
  - `three_keys`: `JSON.stringify(data.three_keys)`
  - `evolution`: `JSON.stringify(data.evolution)`
  - `generated_content`: `JSON.stringify(data.generated_content)`
  - `chart_data`: `JSON.stringify(chartData)`
- **‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
  - `threeKeys` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ –ø–æ–ª–µ `three_keys`
  - `threeKeys` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ `generatedContent.threeKeys`
  - –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±–∞ –º–µ—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

#### 4.3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`lib/db.ts`)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö (`lib/migrations.ts`)
  - –¢–∞–±–ª–∏—Ü–∞ `users` —Å –ø–æ–ª—è–º–∏ JSONB –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –¢–∞–±–ª–∏—Ü–∞ `charts` —Å –ø–æ–ª–µ–º `chart_data` JSONB
- **–û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ON CONFLICT DO UPDATE` –¥–ª—è upsert –æ–ø–µ—Ä–∞—Ü–∏–π
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 4.1. –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è:** –ï—Å—Ç—å –ø–æ–ø—ã—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ localStorage —Å –ë–î –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

#### 4.2. –†–∞–∑–º–µ—Ä JSON –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã `generatedContent` –º–æ–≥—É—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –ª–∏–º–∏—Ç—ã PostgreSQL JSONB
- **–í–ª–∏—è–Ω–∏–µ:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

---

## 5. –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 5.1. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è (`services/storageService.ts`)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ userId:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –∏–∑ Telegram WebApp
- **API –∑–∞–ø—Ä–æ—Å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GET `/api/users/${userId}`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ 404:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –µ—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **Fallback:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç localStorage —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏ (–Ω–µ –ø—Ä–∏ 404)
- **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤:** API endpoint –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑ snake_case –≤ camelCase

#### 5.2. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã (`services/storageService.ts`)
- **API –∑–∞–ø—Ä–æ—Å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GET `/api/charts/${userId}`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ 404:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- **Fallback:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç localStorage —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏

#### 5.3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`App.tsx`)
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏:**
  1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –ë–î
  2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç—É –∏–∑ –ë–î
  3. –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –µ—Å—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç dashboard
  4. –ï—Å–ª–∏ –∫–∞—Ä—Ç—ã –Ω–µ—Ç - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
  5. –û–±–Ω–æ–≤–ª—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç onboarding –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

#### 5.4. –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** JSONB –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è PostgreSQL
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 5.1. Race condition –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤

#### 5.2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–µ–ª–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ –ë–î
- **–í–ª–∏—è–Ω–∏–µ:** –õ–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Å TTL

---

## 6. –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï –î–ê–ù–ù–´–•

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 6.1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- **–ö–ª–∏–µ–Ω—Ç ‚Üí –ë–î:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç camelCase –≤ snake_case –≤ API endpoints
- **–ë–î ‚Üí –ö–ª–∏–µ–Ω—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç snake_case –≤ camelCase –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –¥–∞–Ω–Ω—ã—Ö
- **JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

#### 6.2. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** –í—Å–µ —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `types.ts`
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 6.1. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `any` —Ç–∏–ø—ã
- **–ü—Ä–∏–º–µ—Ä:** `pages/api/charts/[id].ts` - `chartData: any`
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã `NatalChartData`

---

## 7. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –†–ê–ë–û–¢–ê–ï–¢

#### 7.1. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **API endpoints:** –í—Å–µ endpoints –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:** –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 7.2. Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏
- **–†–∞—Å—á–µ—Ç—ã:** Fallback –Ω–∞ mock –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ Swiss Ephemeris (—Ç–æ–ª—å–∫–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö)

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

#### 7.1. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –æ—à–∏–±–∫–∏ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- **–ü—Ä–∏–º–µ—Ä:** `App.tsx` - –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## 8. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### üî¥ –ö–†–ò–¢–ò–ß–ù–û

#### 8.1. –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–µ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è:** –ï—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∑–Ω–∞–∫–∞ –°–æ–ª–Ω—Ü–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô (–∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)

#### 8.2. –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö threeKeys
- **–ü—Ä–æ–±–ª–µ–º–∞:** `threeKeys` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö: `profile.threeKeys` –∏ `profile.generatedContent.threeKeys`
- **–í–ª–∏—è–Ω–∏–µ:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–≤—É–º—è –º–µ—Å—Ç–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
  - –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `generatedContent.threeKeys`
  - –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: –æ–±–∞ –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
  - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ: –æ–±–∞ –ø–æ–ª—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
  - –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `profile.threeKeys`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ–∫–∞–∑—É —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö)

#### 8.3. –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô (—Ä–µ–¥–∫–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)

---

## 9. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã –≤–º–µ—Å—Ç–æ `any`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
4. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ `threeKeys` (—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É `profile.threeKeys` –∏ `generatedContent.threeKeys`)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. ‚ö†Ô∏è –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
2. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ localStorage —Å –ë–î
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. üìù –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –ª—É—á—à–µ–≥–æ UX
2. üìù –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ JSON –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
3. üìù –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions

---

## 10. –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### ‚úÖ –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê: –•–û–†–û–®–û

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —á–µ—Ä–µ–∑ Swiss Ephemeris
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏

**–û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö†Ô∏è –¢–æ—á–Ω–æ—Å—Ç—å —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ (–∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
- ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ null –∑–Ω–∞—á–µ–Ω–∏–π
- ‚ö†Ô∏è –¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö `threeKeys` –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–ª–∞—Å—Ç–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è, –Ω–æ –æ–Ω–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

---

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
